<Window x:Class="WpfAppLean.ToggleButtonDemo"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ToggleButtonDemo"
        Height="450"
        Width="800">

    <!-- =================== Window Resources =================== -->
    <Window.Resources>

        <!-- 展開：移回 X = 0 -->
        <Storyboard x:Key="OpenMenu" FillBehavior="Stop">
            <DoubleAnimation
            Storyboard.TargetName="SideMenuTransform"
            Storyboard.TargetProperty="X"
            To="0"
            Duration="0:0:0.3"
            AccelerationRatio="0.2"
            DecelerationRatio="0.8"/>
        </Storyboard>

        <!-- 收合：移到左邊 -->
        <Storyboard x:Key="CloseMenu" FillBehavior="Stop">
            <DoubleAnimation
            Storyboard.TargetName="SideMenuTransform"
            Storyboard.TargetProperty="X"
            To="-180"
            Duration="0:0:0.3"
            AccelerationRatio="0.2"
            DecelerationRatio="0.8"/>
        </Storyboard>

    </Window.Resources>


    <!-- =================== Main Grid =================== -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="SideMenuColumn" Width="180"/>
            <!-- Sidebar -->
            <ColumnDefinition Width="*"/>
            <!-- Main content -->
        </Grid.ColumnDefinitions>

        <!-- =================== Sidebar =================== -->
        <Grid x:Name="SideMenu"
              Grid.Column="0"
              Background="Black"
              Width="180">

            <!-- TranslateTransform for smooth slide -->
            <Grid.RenderTransform>
                <TranslateTransform x:Name="SideMenuTransform" X="0"/>
            </Grid.RenderTransform>

            <Grid.RowDefinitions>
                <RowDefinition Height="60"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- ToggleButton (hamburger) -->
            <ToggleButton x:Name="MenuToggleButton"
                          Width="40"
                          HorizontalAlignment="Left"
                          Height="40"
                          Margin="5,0,0,0"
                          Click="MenuToggleButton_Click_2">
                <ToggleButton.Triggers>
                    <EventTrigger RoutedEvent="ToggleButton.Checked">
                        <BeginStoryboard Storyboard="{StaticResource OpenMenu}"/>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="ToggleButton.Unchecked">
                        <BeginStoryboard Storyboard="{StaticResource CloseMenu}"/>
                    </EventTrigger>
                </ToggleButton.Triggers>

                <ToggleButton.Template>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border Width="40" Height="40" Background="Transparent">
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Rectangle Fill="White" Height="2" Width="20" Margin="3"/>
                                <Rectangle Fill="White" Height="2" Width="20" Margin="3"/>
                                <Rectangle Fill="White" Height="2" Width="20" Margin="3"/>
                            </StackPanel>
                        </Border>
                    </ControlTemplate>
                </ToggleButton.Template>
            </ToggleButton>

            <!-- Vertical menu buttons -->
            <StackPanel Grid.Row="1" Margin="10" VerticalAlignment="Top">
                <Border CornerRadius="4" Background="LemonChiffon" Margin="0,5" Height="40" Width="90">
                    <Button BorderThickness="0" Background="Transparent" HorizontalContentAlignment="Right" Padding="10,0" HorizontalAlignment="Center" Content="首頁"/>
                </Border>
                <Border CornerRadius="4" Background="LemonChiffon" Margin="0,5" Height="40" Width="90">
                    <Button BorderThickness="0" Background="Transparent" HorizontalContentAlignment="Right" Padding="10,0" HorizontalAlignment="Center" Content="帳號管理"/>
                </Border>
                <Border CornerRadius="4" Background="LemonChiffon" Margin="0,5" Height="40" Width="90">
                    <Button BorderThickness="0" Background="Transparent" HorizontalContentAlignment="Right" Padding="10,0" HorizontalAlignment="Center" Content="設定"/>
                </Border>
            </StackPanel>
        </Grid>

        <!-- =================== Black Mask =================== -->
        <Border x:Name="Mask"
                Grid.Column="1"
                Background="#80000000"
                Visibility="Collapsed"
                Panel.ZIndex="10"
                MouseLeftButtonDown="Mask_MouseLeftButtonDown"/>

        <!-- =================== Main Content =================== -->
        <Frame Grid.Column="1"
               x:Name="MainContent"
               NavigationUIVisibility="Hidden"
               Background="BlanchedAlmond"/>
    </Grid>

    <!-- =================== Triggers for Mask Visibility =================== -->

</Window>
